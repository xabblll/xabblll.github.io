---
layout: default
title: Xabblll - Home
---
<h2>Latest</h2>
<div id="displayTechart"></div>
<br>
<br>
<br>
<br>
<div id="displayDevlog"></div>

<script>
    //  =============== Manifest =================== //
    
    const posts = [{% for post in site.posts %}
        {
            title: "{{ post.title }}", 
            url: "{{ post.url }}",
            date: "{{ post.date }}",
            categories: "{{ post.categories }}",
            tags: "{{ post.tags }}",
            image: "{{ post.image }}",
            description: '{{ post.description}}',
            // excerpt: '{{ post.excerpt | jsonify}}'
        }{% unless forloop.last %},{% endunless %}
    {% endfor %}];
    
    // //Fix jsonify excessive quotes
    // for (let i = 0; i < posts.length; i++) {
    //     posts[i].excerpt = posts[i].excerpt.slice(0, -1).slice(1);
    // }
    
    //  ================= Methods ================== //

    (function(){
        if (typeof Object.defineProperty === 'function'){
            try{Object.defineProperty(Array.prototype,'sortBy',{value:sb}); }catch(e){}
        }
        if (!Array.prototype.sortBy) Array.prototype.sortBy = sb;

        function sb(f){
            for (var i=this.length;i;){
                var o = this[--i];
                this[i] = [].concat(f.call(o,o,i),o);
            }
            this.sort(function(a,b){
                for (var i=0,len=a.length;i<len;++i){
                    if (a[i]!=b[i]) return a[i]<b[i]?-1:1;
                }
                return 0;
            });
            for (var i=this.length;i;){
                this[--i]=this[i][this[i].length-1];
            }
            return this;
        }
    })();
    
    function generatePostHtml(post)
    {
        let html = '<a class="postThumb" href=' + post.url + '>';
        // if(post.image !== "")
        // {
        //     //html += '<img src="' + post.image + '"alt="PostImage">';
        //     html += ' style="background-image: url(' + post.image + ');"'
        // }
        if(post.image !== "")
        {
            html += '<img src="' + post.image + '"alt="PostImage" class="postThumbImage">';
        }
        else
        {
            html += '<img src="/assets/images/someBG.png" alt="PostImage" class="postThumbImage">';

            // html += '<div style="width: 100px; height: 100px; background-color: #FF00FF; margin-top:1rem;margin-bottom:1rem;margin-left: auto;margin-right: auto;"></div>';
        }
        html += '<h2 class="postThumbTitle">' + post.title + '</h2>';
        html += '<p class="postThumbDescription">' + post.description + '</p></a>';
        return html;
    }
    
    function getPostsHtml(postsToShow)
    {
        let html = "";
        html += '<div class="postThumbRoot">';
        for (let i = 0; i < postsToShow.length; i++)
        {
            html += generatePostHtml(postsToShow[i]);
        }
        html += '</div>';
        return html;
    }
    
    function detCategoryHtml(category)
    {
        let html = '<h1>'+category+'</h1>';
        let categoryPosts = posts.filter((p)=>p.categories===category);
        let numberOfPosts = 2;
        categoryPosts = categoryPosts.sortBy(function (o){return -o.date });
        if(categoryPosts.length > numberOfPosts)
        {
            categoryPosts = categoryPosts.slice(0, numberOfPosts);
        }
        html += getPostsHtml(categoryPosts);
        return html;
    }
    
    

    //  ================ Script =================== //

    document.getElementById("displayTechart").innerHTML = detCategoryHtml("techart");
    document.getElementById("displayDevlog").innerHTML = detCategoryHtml("devlog");
    
    console.log(posts);
    
</script>